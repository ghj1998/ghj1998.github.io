---
title: ANTLR4理解
date: 2021-04-26 18:55:47
tags: 
- ANTLR
- 语法分析
---

# ANTLR背后在干什么？

## 1. 语法分析的过程

**语法分析**由两个阶段：

- **词法分析(lexical analysis)/词法符号化(tokenizing)**：将字符聚集为单词或者符号(**词法符号，token**)的过程，将**输入文本**转化为**词法符号**的过程称为**词法分析器(lexer)**。**词法分析器**可以将词法符号分类，例如INT，FLOAT等等。词法符号包含至少两部分信息，词法符号的类型以及该符号对应的文本。
- **识别语句结构**：构造语法分析树来记录语法分析器的数据结构。

总的来说，就是先划分成词，再分析。

例如：

![image-20210426213615055](https://raw.githubusercontent.com/ghj1998/image_repository/main/image-20210426213615055.png)

**语法分析树解析**：

- 叶子节点永远是输入的词法符号。
- 根节点是抽象的名字，stat是statement的简写。
- 树的结构在后续很好处理，并且能传递完整的符号信息。
- 子树的根节点是对应语法规则的名字。

![image-20210426215414826](https://raw.githubusercontent.com/ghj1998/image_repository/main/image-20210426215414826.png)

这就是语法规则。

## 2. 实现一个语法分析器

ANTLR工具依赖于类似于assign的语法规则，产生递归下降的语法分析器。

**什么是递归下降？**

从根节点开始，向叶节点解析。